<div class="flex flex-col lg:flex-row gap-5">
  <list-user
    [users]="sortedUsers()"
    (onChange)="createMarkers($event)"
    [selectedId]="selectedId()"
  />

  <div class="w-full flex flex-col gap-5 lg:mr-5">
    <div
      class="relative bg-white p-4 rounded-md border border-border z-50 lg:h-24 lg:mt-5 flex flex-col lg:flex-row lg:items-center justify-between"
    >
      <div>
        <p class="hidden lg:block">{{ currentUser()?.name }}</p>
        <div class="flex gap-2 items-center font-semibold">
          <p>{{ currentUser()?.positions?.start?.label }}</p>
          <span>/</span>
          <p>{{ currentUser()?.positions?.end?.label }}</p>
        </div>
      </div>
      <div>
        <h4>Distance between markers</h4>
        <p class="font-semibold">
          {{ distanceKm() }} km / {{ distanceMiles() }} mi
        </p>
      </div>
    </div>

    <div class="border border-border rounded-md overflow-hidden relative">
      <google-map
        [options]="options"
        width="100%"
        [center]="center"
        [zoom]="12"
        class="block w-full"
      >
        @for (marker of markers(); track marker.label) {
          <map-advanced-marker
            [position]="marker"
            [options]="{ title: marker.label }"
            [content]="
              getMarkerContent(marker.label === 'Start' ? 'baby' : 'house')
            "
          >
          </map-advanced-marker>
        }

        <map-polyline
          [options]="{
            path: markers(),
            strokeColor: 'red',
            strokeOpacity: 0,
            icons: [
              {
                icon: { path: 'M 0,-1 0,1', strokeOpacity: 1, scale: 4 },
                offset: '0',
                repeat: '20px',
              },
            ],
          }"
        ></map-polyline>
      </google-map>

      <view-all />
    </div>
  </div>
</div>
